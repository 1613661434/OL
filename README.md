# OL

ä¸€ä¸ªåŒ…å« `ollib`ã€`oldblib/oracle` åŠ FTP åŠŸèƒ½çš„ C++ å·¥å…·åº“ï¼Œæä¾›åŸºç¡€åŠŸèƒ½ã€Oracle æ•°æ®åº“äº¤äº’åŠ FTP å®¢æˆ·ç«¯æ”¯æŒã€‚

## ğŸ€ é¡¹ç›®è¡ç”Ÿè¯´æ˜  
OL åº“ **fork è‡ª freecplus åº“**ï¼Œæ„Ÿè°¢åŸä½œè€…è´¡çŒ®ï¼åœ¨å…¶åŸºç¡€ä¸Šæ‰©å±•åŠŸèƒ½å¹¶å®ç°è·¨å¹³å°é€‚é…ï¼Œæ ¸å¿ƒåè®®éµå¾ªï¼š  
- [freecplus å¼€æºè®¸å¯åè®®](https://blog.csdn.net/wucz122140729/article/details/105167157)ï¼ˆéœ€ä¿ç•™ç‰ˆæƒå£°æ˜ä¸è®¸å¯åè®®ï¼‰  
- åŸæ–‡éµå¾ª [CC 4.0 BY-SA åè®®](https://creativecommons.org/licenses/by-sa/4.0/)ï¼Œè½¬è½½/ä¿®æ”¹éœ€ä¿ç•™åŸæ–‡é“¾æ¥ä¸å£°æ˜  

## ğŸ“œ è®¸å¯è¯å¾½ç« 
![License: CC BY-SA 4.0](https://img.shields.io/badge/License-CC%20BY--SA%204.0-lightgrey.svg)  
æœ¬é¡¹ç›®æ‰€æœ‰ä¿®æ”¹ã€æ‰©å±•åŠæ–°å¢å†…å®¹ï¼Œå‡ä»¥ **Creative Commons Attribution-ShareAlike 4.0 International (CC BY-SA 4.0)** è®¸å¯è¯å‘å¸ƒï¼Œå®Œæ•´æ³•å¾‹æ–‡æœ¬è§ [CC BY-SA 4.0 å®˜æ–¹åè®®](https://creativecommons.org/licenses/by-sa/4.0/legalcode)ã€‚


## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½
- **`ollib`**ï¼šåŸºç¡€å·¥å…·åº“ï¼Œè¦†ç›–ç½‘ç»œé€šä¿¡ã€æ–‡ä»¶IOã€æ—¶é—´å¤„ç†ã€å­—ç¬¦ä¸²æ“ä½œç­‰é«˜é¢‘åŸºç¡€åŠŸèƒ½ã€‚
- **`oldblib/oracle`**ï¼šOracle æ•°æ®åº“äº¤äº’æ¨¡å—ï¼ŒåŸºäº OCI æ¥å£å°è£…ï¼Œæ”¯æŒè¿æ¥ç®¡ç†ã€SQL æ‰§è¡Œã€ç»“æœè§£æç­‰æ ¸å¿ƒæ•°æ®åº“æ“ä½œã€‚
- **`ol_ftp`**ï¼šFTP å®¢æˆ·ç«¯æ¨¡å—ï¼ŒåŸºäºç¬¬ä¸‰æ–¹åº“ [ftplib](https://github.com/codebrainz/ftplib)ï¼ˆå·²å†…ç½®ï¼‰ï¼Œæ”¯æŒæ–‡ä»¶ä¸Šä¼ /ä¸‹è½½ã€ç›®å½•åˆ›å»º/åˆ é™¤ã€æ–‡ä»¶åˆ—è¡¨è·å–ç­‰ FTP æ ‡å‡†æ“ä½œã€‚


## ğŸ“š ä»£ç æ–‡æ¡£è§„èŒƒ
æœ¬é¡¹ç›®æ‰€æœ‰å¤´æ–‡ä»¶ï¼ˆ`.h`ï¼‰å‡éµå¾ª **Doxygen æ³¨é‡Šè§„èŒƒ**ï¼Œä¾¿äºå¼€å‘è€…å¿«é€Ÿç†è§£æ¥å£åŠŸèƒ½å’Œä½¿ç”¨æ–¹å¼ï¼Œä¸»è¦ç‰¹ç‚¹åŒ…æ‹¬ï¼š
- å‡½æ•°/ç±»/ç»“æ„ä½“å‡åŒ…å«å®Œæ•´æ³¨é‡Šï¼Œè¦†ç›–åŠŸèƒ½æè¿°ï¼ˆ`@brief`ï¼‰ã€å‚æ•°è¯´æ˜ï¼ˆ`@param`ï¼‰ã€è¿”å›å€¼ï¼ˆ`@return`ï¼‰åŠå¯é€‰æ³¨æ„äº‹é¡¹ï¼ˆ`@note`ï¼‰ã€‚
- æ”¯æŒé€šè¿‡ Doxygen å·¥å…·è‡ªåŠ¨ç”Ÿæˆ HTML/PDF æ ¼å¼çš„ API æ–‡æ¡£ï¼Œé™ä½äºŒæ¬¡å¼€å‘å­¦ä¹ æˆæœ¬ã€‚
- ä¸»æµ IDEï¼ˆVS Codeã€CLion ç­‰ï¼‰å¯è¯†åˆ«æ³¨é‡Šå¹¶æä¾›æ™ºèƒ½æç¤ºï¼ˆé¼ æ ‡æ‚¬åœæ˜¾ç¤ºè¯¦ç»†è¯´æ˜ï¼‰ï¼Œæå‡ç¼–ç æ•ˆç‡ã€‚

### ç¤ºä¾‹æ³¨é‡Šé£æ ¼
```cpp
/**
 * @brief åˆ é™¤å­—ç¬¦ä¸²å·¦å³ä¸¤è¾¹æŒ‡å®šå­—ç¬¦
 *        æ”¯æŒ C å­—ç¬¦ä¸²å’Œ std::string ä¸¤ç§ç±»å‹
 * @param str å¾…å¤„ç†çš„å­—ç¬¦ä¸²ï¼ˆCå­—ç¬¦ä¸²ç›´æ¥ä¿®æ”¹ï¼Œstd::stringä¸ºå¼•ç”¨ï¼‰
 * @param c è¦åˆ é™¤çš„å­—ç¬¦ï¼ˆé»˜è®¤ç©ºæ ¼' 'ï¼‰
 * @return ä¿®æ”¹åçš„å­—ç¬¦ä¸²ï¼ˆCå­—ç¬¦ä¸²è¿”å›æŒ‡é’ˆï¼Œstd::stringè¿”å›å¼•ç”¨ï¼‰
 */
char* deleteLRchr(char* str, const char c = ' ');
std::string& deleteLRchr(std::string& str, const char c = ' ');
```


## âš™ï¸ ç¯å¢ƒä¾èµ–
### åŸºç¡€ä¾èµ–
- æ„å»ºå·¥å…·ï¼šCMake 3.10+
- ç¼–è¯‘å™¨ï¼šC++17 å…¼å®¹ç¼–è¯‘å™¨ï¼ˆGCC 8+/Clang 7+/MSVC 2019+/MinGW 8+ï¼‰

### æ¨¡å—ç‰¹å®šä¾èµ–
| æ¨¡å—                | ä¾èµ–é¡¹è¯´æ˜                                                                 |
|---------------------|--------------------------------------------------------------------------|
| `oldblib/oracle`    | Oracle å®¢æˆ·ç«¯ï¼ˆç‰ˆæœ¬ 11g åŠä»¥ä¸Šï¼‰ï¼›éœ€é…ç½® `ORACLE_HOME` ç¯å¢ƒå˜é‡ï¼Œç¡®ä¿ OCI åº“ï¼ˆ`oci.dll`/`libclntsh.so`ï¼‰å¯é“¾æ¥ |
| `ol_ftp`            | å†…ç½®ä¾èµ–ï¼šå·²é›†æˆ [ftplib](https://github.com/codebrainz/ftplib)ï¼ˆè·¯å¾„ï¼š`third_party/ftplib`ï¼‰ï¼Œæ— éœ€é¢å¤–å®‰è£… |


## ğŸ“ ç¼–ç ä¸æ ¼å¼è§„èŒƒ
ä¸ºä¿è¯è·¨å¹³å°å…¼å®¹æ€§ï¼Œæœ¬é¡¹ç›®ä¸¥æ ¼éµå¾ªä»¥ä¸‹è§„èŒƒï¼š
1. **å­—ç¬¦é›†**ï¼šæ‰€æœ‰æºä»£ç æ–‡ä»¶ï¼ˆ`.h`/`.cpp`/`.cmake` ç­‰ï¼‰å‡é‡‡ç”¨ **UTF-8ï¼ˆæ—  BOMï¼‰** ç¼–ç ï¼Œé¿å…å¤šè¯­è¨€å­—ç¬¦ï¼ˆå«ä¸­æ–‡ï¼‰åœ¨ä¸åŒç³»ç»Ÿä¸‹ä¹±ç ã€‚
2. **æ¢è¡Œç¬¦**ï¼šç»Ÿä¸€ä½¿ç”¨ **LFï¼ˆ\nï¼‰** ä½œä¸ºæ¢è¡Œç¬¦ï¼Œé˜²æ­¢è·¨å¹³å°åä½œæ—¶å›  CRLFï¼ˆWindowsï¼‰/LFï¼ˆLinux/macOSï¼‰æ··ç”¨å¯¼è‡´çš„ç‰ˆæœ¬æ§åˆ¶å†²çªã€‚

> ğŸ’¡ æç¤ºï¼šå»ºè®®åœ¨ç¼–è¾‘å™¨ä¸­å›ºåŒ–é…ç½®ï¼ˆå¦‚ VS Code å¯é€šè¿‡ `.vscode/settings.json` è®¾ç½®ï¼‰ï¼Œæäº¤ä»£ç å‰ç¡®ä¿ç¬¦åˆè§„èŒƒï¼Œç¤ºä¾‹é…ç½®å¦‚ä¸‹ï¼š
> ```json
> {
>   "files.encoding": "utf8",
>   "files.eol": "\n",
>   "files.trimTrailingWhitespace": true
> }
> ```


## ğŸ”¨ ç¼–è¯‘æ­¥éª¤
### Linux å¹³å°
```bash
# 1. å…‹éš†ä»“åº“
git clone https://github.com/1613661434/OL.git
cd OL

# 2. åˆ›å»ºå¹¶è¿›å…¥æ„å»ºç›®å½•ï¼ˆæ¨èout-of-sourceæ„å»ºï¼‰
mkdir build && cd build

# 3. ç”Ÿæˆ Makefileï¼ˆè‡ªåŠ¨è¯†åˆ« ORACLE_HOMEï¼Œå†…ç½® ftplib æ— éœ€é¢å¤–é…ç½®ï¼‰
cmake ..

# 4. å¹¶è¡Œç¼–è¯‘ï¼ˆ-j åæ¥æ ¸å¿ƒæ•°ï¼Œå¦‚ -j4 è¡¨ç¤º4çº¿ç¨‹ï¼‰
make -j4

# 5. è¾“å‡ºè·¯å¾„
# - é™æ€åº“ï¼šlib/linux/static/
# - åŠ¨æ€åº“ï¼šlib/linux/shared/
# - æµ‹è¯•ç¨‹åºï¼šå„è‡ª test/bin/ ç›®å½•ä¸‹
```

### Windows å¹³å°ï¼ˆMSVCï¼‰
```powershell
# 1. å…‹éš†ä»“åº“
git clone https://github.com/1613661434/OL.git
cd OL

# 2. åˆ›å»ºå¹¶è¿›å…¥æ„å»ºç›®å½•
mkdir build && cd build

# 3. ç”Ÿæˆ Visual Studio é¡¹ç›®ï¼ˆä»¥ VS2022 x64 ä¸ºä¾‹ï¼‰
cmake .. -G "Visual Studio 17 2022" -A x64

# 4. ç¼–è¯‘ï¼ˆæˆ–ç›´æ¥åœ¨ VS ä¸­æ‰“å¼€ OL.sln ç¼–è¯‘ï¼‰
msbuild OL.sln /p:Configuration=Release /p:Platform=x64 /m

# 5. è¾“å‡ºè·¯å¾„
# - é™æ€åº“ï¼šlib/win32/static/
# - åŠ¨æ€åº“ï¼šlib/win32/shared/
# - æµ‹è¯•ç¨‹åºï¼šå„è‡ª test/bin/ ç›®å½•ä¸‹
```

### Windows å¹³å°ï¼ˆMinGWï¼‰
#### å‰ç½®æ¡ä»¶
- å®‰è£… MinGW-w64ï¼ˆæ”¯æŒ 64 ä½ï¼‰ï¼Œç¡®ä¿ `g++`ã€`mingw32-make` å·¥å…·å¯ç”¨ã€‚
- å°† MinGW çš„ `bin` ç›®å½•ï¼ˆå¦‚ `D:\MinGW\bin`ï¼‰æ·»åŠ åˆ°ç³»ç»Ÿ `PATH`ï¼Œé€šè¿‡ `g++ --version` éªŒè¯å®‰è£…ã€‚

#### ç¼–è¯‘å‘½ä»¤
```powershell
# 1. å…‹éš†ä»“åº“
git clone https://github.com/1613661434/OL.git
cd OL

# 2. åˆ›å»ºå¹¶è¿›å…¥æ„å»ºç›®å½•
mkdir build && cd build

# 3. ç”Ÿæˆ MinGW Makefile
cmake .. -G "MinGW Makefiles"

# 4. å¹¶è¡Œç¼–è¯‘
mingw32-make -j4

# 5. è¾“å‡ºè·¯å¾„ä¸æ‰©å±•åè¯´æ˜
# - é™æ€åº“ï¼šlib/win32/static/ï¼ˆ.a æ ¼å¼ï¼Œå¦‚ libol.aï¼‰
# - åŠ¨æ€åº“ï¼šlib/win32/shared/ï¼ˆ.dll æ ¼å¼ï¼Œå¦‚ ol.dllï¼‰
# - æµ‹è¯•ç¨‹åºï¼šå„è‡ª test/bin/win32/ ç›®å½•ä¸‹ï¼ˆè¿‡æ»¤ Linux ç‰¹æœ‰æµ‹è¯•ç”¨ä¾‹ï¼‰
```

#### ç»ˆç«¯ä¹±ç è§£å†³
è‹¥ Windows PowerShell å‡ºç°ä¸­æ–‡ä¹±ç ï¼Œå¯ä¸´æ—¶è®¾ç½® UTF-8 å­—ç¬¦é›†ï¼š
```powershell
# è®¾ç½®ä»£ç é¡µä¸º UTF-8 å¹¶ç»Ÿä¸€è¾“å…¥è¾“å‡ºç¼–ç 
chcp 65001 | Out-Null
$OutputEncoding = [Console]::InputEncoding = [Console]::OutputEncoding = New-Object System.Text.UTF8Encoding

# éªŒè¯ç¼–ç ï¼ˆéœ€æ˜¾ç¤º BodyName: utf-8, CodePage: 65001ï¼‰
$OutputEncoding
```


## âš ï¸ æ³¨æ„äº‹é¡¹
1. **å†…ç½®ä¾èµ–ä¿æŠ¤**ï¼š`third_party/ftplib` ä¸ºé¡¹ç›®æ ¸å¿ƒä¾èµ–ï¼Œè¯·å‹¿éšæ„ä¿®æ”¹ç›®å½•ç»“æ„ï¼›å¦‚éœ€æ›´æ–° ftplib ç‰ˆæœ¬ï¼Œå»ºè®®ç›´æ¥æ›¿æ¢è¯¥ç›®å½•æ–‡ä»¶å¹¶ä¿æŒè·¯å¾„ä¸€è‡´ã€‚
2. **Oracle å¹³å°é€‚é…**ï¼šè·¨å¹³å°ç¼–è¯‘æ—¶ï¼Œéœ€ç¡®ä¿ Oracle å®¢æˆ·ç«¯ç‰ˆæœ¬ä¸ç›®æ ‡å¹³å°åŒ¹é…ï¼ˆå¦‚ Windows x64 å¯¹åº” Oracle å®¢æˆ·ç«¯ x64 ç‰ˆæœ¬ï¼ŒLinux x86_64 å¯¹åº”åŒæ¶æ„ç‰ˆæœ¬ï¼‰ã€‚
3. **è®¸å¯è¯åˆè§„**ï¼šåŸºäºæœ¬é¡¹ç›®äºŒæ¬¡å¼€å‘æˆ–åˆ†å‘æ—¶ï¼Œéœ€ä¸¥æ ¼éµå®ˆ CC BY-SA 4.0 åè®®ï¼ŒåŒ…å«åŸé¡¹ç›®ç½²åï¼ˆæ ¼å¼å»ºè®®ï¼šâ€œåŸºäº olæœ¨å­ælo å¼€å‘çš„ OL åº“ï¼ˆæºè‡ª freecplus åº“ï¼‰â€ï¼‰åŠè®¸å¯è¯å£°æ˜ã€‚


## ğŸ“‹ è¯¦ç»†åŠŸèƒ½ä»‹ç»
...è¯·ç­‰å¾…ä½œè€…æ›´æ–°