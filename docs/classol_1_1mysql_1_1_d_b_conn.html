<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OL: ol::mysql::DBConn类 参考</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="OL.png"/></td>
  <td id="projectalign">
   <div id="projectname">OL<span id="projectnumber">&#160;Version 0.0.1</span>
   </div>
   <div id="projectbrief">This is a C++ library.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 制作者 Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','搜索',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('classol_1_1mysql_1_1_d_b_conn.html','','classol_1_1mysql_1_1_d_b_conn-members'); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">载入中...</div>
<div class="SRStatus" id="Searching">搜索中...</div>
<div class="SRStatus" id="NoMatches">未找到</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">ol::mysql::DBConn类 参考</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="ol__mysql_8h_source.html">ol_mysql.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pub-methods" class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public 成员函数</h2></td></tr>
<tr class="memitem:a436bfa9d118e16b48bc4fbb75aba9509" id="r_a436bfa9d118e16b48bc4fbb75aba9509"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a436bfa9d118e16b48bc4fbb75aba9509">DBConn</a> ()</td></tr>
<tr class="memitem:a21b561060eb830ca7d3c0d8a1f105c05" id="r_a21b561060eb830ca7d3c0d8a1f105c05"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a21b561060eb830ca7d3c0d8a1f105c05">~DBConn</a> ()</td></tr>
<tr class="memitem:a71e770f9663f4519aec47929a635fb31" id="r_a71e770f9663f4519aec47929a635fb31"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a71e770f9663f4519aec47929a635fb31">reconnect</a> ()</td></tr>
<tr class="memdesc:a71e770f9663f4519aec47929a635fb31"><td class="mdescLeft">&#160;</td><td class="mdescRight">重新连接数据库  <br /></td></tr>
<tr class="memitem:a149cbf01195e9af7745c2fabb26251bd" id="r_a149cbf01195e9af7745c2fabb26251bd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a149cbf01195e9af7745c2fabb26251bd">connecttodb</a> (const std::string &amp;connstr, const std::string &amp;charset, bool autocommitopt=false)</td></tr>
<tr class="memdesc:a149cbf01195e9af7745c2fabb26251bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">登录数据库  <br /></td></tr>
<tr class="memitem:a1b5d8f6e7400a163a628c0e8d55404d8" id="r_a1b5d8f6e7400a163a628c0e8d55404d8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1b5d8f6e7400a163a628c0e8d55404d8">isopen</a> ()</td></tr>
<tr class="memdesc:a1b5d8f6e7400a163a628c0e8d55404d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">判断数据库是否已连接  <br /></td></tr>
<tr class="memitem:abb064f7995d5dfc399af36b80b0bab92" id="r_abb064f7995d5dfc399af36b80b0bab92"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abb064f7995d5dfc399af36b80b0bab92">commit</a> ()</td></tr>
<tr class="memdesc:abb064f7995d5dfc399af36b80b0bab92"><td class="mdescLeft">&#160;</td><td class="mdescRight">提交事务  <br /></td></tr>
<tr class="memitem:add40429c3b966d04e70679fa9143bb18" id="r_add40429c3b966d04e70679fa9143bb18"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#add40429c3b966d04e70679fa9143bb18">rollback</a> ()</td></tr>
<tr class="memdesc:add40429c3b966d04e70679fa9143bb18"><td class="mdescLeft">&#160;</td><td class="mdescRight">回滚事务  <br /></td></tr>
<tr class="memitem:a1e8862e18153291f932587533e5e5826" id="r_a1e8862e18153291f932587533e5e5826"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1e8862e18153291f932587533e5e5826">disconnect</a> ()</td></tr>
<tr class="memdesc:a1e8862e18153291f932587533e5e5826"><td class="mdescLeft">&#160;</td><td class="mdescRight">断开数据库连接（未提交事务自动回滚）  <br /></td></tr>
<tr class="memitem:ae475137773b3e0bd04676eded3e2c1ab" id="r_ae475137773b3e0bd04676eded3e2c1ab"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae475137773b3e0bd04676eded3e2c1ab">execute</a> (const char *fmt,...)</td></tr>
<tr class="memdesc:ae475137773b3e0bd04676eded3e2c1ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">执行静态SQL语句（无绑定变量的非查询语句）  <br /></td></tr>
<tr class="memitem:a29bceb544e649de7ba01e2076761c09f" id="r_a29bceb544e649de7ba01e2076761c09f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a29bceb544e649de7ba01e2076761c09f">rc</a> ()</td></tr>
<tr class="memdesc:a29bceb544e649de7ba01e2076761c09f"><td class="mdescLeft">&#160;</td><td class="mdescRight">获取错误代码  <br /></td></tr>
<tr class="memitem:a1841d1553d13a2f44013c192e68f149b" id="r_a1841d1553d13a2f44013c192e68f149b"><td class="memItemLeft" align="right" valign="top">unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1841d1553d13a2f44013c192e68f149b">rpc</a> ()</td></tr>
<tr class="memdesc:a1841d1553d13a2f44013c192e68f149b"><td class="mdescLeft">&#160;</td><td class="mdescRight">获取影响数据的行数  <br /></td></tr>
<tr class="memitem:adbe08566fa4b81183df807582b9fe67d" id="r_adbe08566fa4b81183df807582b9fe67d"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#adbe08566fa4b81183df807582b9fe67d">message</a> ()</td></tr>
<tr class="memdesc:adbe08566fa4b81183df807582b9fe67d"><td class="mdescLeft">&#160;</td><td class="mdescRight">获取错误描述信息  <br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pri-types" class="groupheader"><a id="pri-types" name="pri-types"></a>
Private 类型</h2></td></tr>
<tr class="memitem:a5d11a35a629e977c652c6d42be616a88" id="r_a5d11a35a629e977c652c6d42be616a88"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <a class="el" href="#a5d11a35a629e977c652c6d42be616a88a2d3e1acf298e111d681893840411b208">connected</a>
, <a class="el" href="#a5d11a35a629e977c652c6d42be616a88adceccc45418380f3f59bcc9ca57bcb8b">disconnected</a>
 }</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pri-methods" class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private 成员函数</h2></td></tr>
<tr class="memitem:a306b5ef859d4a99299361bb6b1aed498" id="r_a306b5ef859d4a99299361bb6b1aed498"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a306b5ef859d4a99299361bb6b1aed498">character</a> (const char *charset)</td></tr>
<tr class="memitem:a8f3147e0b894a800d635649041ea80cb" id="r_a8f3147e0b894a800d635649041ea80cb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8f3147e0b894a800d635649041ea80cb">setdbopt</a> (const char *connstr)</td></tr>
<tr class="memitem:a67d691b37160336948e69daaaf99e25f" id="r_a67d691b37160336948e69daaaf99e25f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a67d691b37160336948e69daaaf99e25f">err_report</a> ()</td></tr>
<tr class="memitem:ae54ccfde6f9e18cd31e9323e6520ec6c" id="r_ae54ccfde6f9e18cd31e9323e6520ec6c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae54ccfde6f9e18cd31e9323e6520ec6c">DBConn</a> (const <a class="el" href="classol_1_1mysql_1_1_d_b_conn.html">DBConn</a> &amp;)=delete</td></tr>
<tr class="memitem:a4f76c06de210477552b89a705114f203" id="r_a4f76c06de210477552b89a705114f203"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classol_1_1mysql_1_1_d_b_conn.html">DBConn</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4f76c06de210477552b89a705114f203">operator=</a> (const <a class="el" href="classol_1_1mysql_1_1_d_b_conn.html">DBConn</a> &amp;)=delete</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pri-attribs" class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private 属性</h2></td></tr>
<tr class="memitem:ac790a70ad9ef4a7d4c60018849c7bd6a" id="r_ac790a70ad9ef4a7d4c60018849c7bd6a"><td class="memItemLeft" align="right" valign="top">MYSQL *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac790a70ad9ef4a7d4c60018849c7bd6a">m_mysql</a></td></tr>
<tr class="memitem:a22858c5f72e930e6f3efbe73b25fd054" id="r_a22858c5f72e930e6f3efbe73b25fd054"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a22858c5f72e930e6f3efbe73b25fd054">m_autocommitopt</a></td></tr>
<tr class="memitem:a892cd3f823cd2d846bed2ca626996328" id="r_a892cd3f823cd2d846bed2ca626996328"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a892cd3f823cd2d846bed2ca626996328">m_state</a></td></tr>
<tr class="memitem:adb9de7af304d94a7d7bcbf39ca0c8af0" id="r_adb9de7af304d94a7d7bcbf39ca0c8af0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structol_1_1mysql_1_1_c_d_a___d_e_f.html">CDA_DEF</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#adb9de7af304d94a7d7bcbf39ca0c8af0">m_cda</a></td></tr>
<tr class="memitem:a4ddee18472da0953e18221e17f975acd" id="r_a4ddee18472da0953e18221e17f975acd"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4ddee18472da0953e18221e17f975acd">m_host</a></td></tr>
<tr class="memitem:ab4251d0d50e1af65f7e495ce6bcf803e" id="r_ab4251d0d50e1af65f7e495ce6bcf803e"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab4251d0d50e1af65f7e495ce6bcf803e">m_user</a></td></tr>
<tr class="memitem:a6b7cbf8609362912d12ae500aa444f11" id="r_a6b7cbf8609362912d12ae500aa444f11"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6b7cbf8609362912d12ae500aa444f11">m_pass</a></td></tr>
<tr class="memitem:a0c81998dff8b3ed958621980ebbfd84d" id="r_a0c81998dff8b3ed958621980ebbfd84d"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0c81998dff8b3ed958621980ebbfd84d">m_dbname</a></td></tr>
<tr class="memitem:a89c77637570af337c0d41a7064ae822d" id="r_a89c77637570af337c0d41a7064ae822d"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a89c77637570af337c0d41a7064ae822d">m_port</a></td></tr>
<tr class="memitem:aba9291fa2b473601eddb07ab7604a64a" id="r_aba9291fa2b473601eddb07ab7604a64a"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aba9291fa2b473601eddb07ab7604a64a">m_unix_socket</a></td></tr>
<tr class="memitem:a6cd3170df9604e26b68d546a56413bb6" id="r_a6cd3170df9604e26b68d546a56413bb6"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6cd3170df9604e26b68d546a56413bb6">m_charset</a></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-friends" class="groupheader"><a id="friends" name="friends"></a>
友元</h2></td></tr>
<tr class="memitem:aa64c719be4d2aea92d419606f414e98a" id="r_aa64c719be4d2aea92d419606f414e98a"><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa64c719be4d2aea92d419606f414e98a">DBStmt</a></td></tr>
</table>
<a name="doc-enum-members" id="doc-enum-members"></a><h2 id="header-doc-enum-members" class="groupheader">成员枚举类型说明</h2>
<a id="a5d11a35a629e977c652c6d42be616a88" name="a5d11a35a629e977c652c6d42be616a88"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d11a35a629e977c652c6d42be616a88">&#9670;&#160;</a></span>anonymous enum</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">枚举值</th></tr><tr><td class="fieldname"><a id="a5d11a35a629e977c652c6d42be616a88a2d3e1acf298e111d681893840411b208" name="a5d11a35a629e977c652c6d42be616a88a2d3e1acf298e111d681893840411b208"></a>connected&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a5d11a35a629e977c652c6d42be616a88adceccc45418380f3f59bcc9ca57bcb8b" name="a5d11a35a629e977c652c6d42be616a88adceccc45418380f3f59bcc9ca57bcb8b"></a>disconnected&#160;</td><td class="fielddoc"></td></tr>
</table>

</div>
</div>
<a name="doc-constructors" id="doc-constructors"></a><h2 id="header-doc-constructors" class="groupheader">构造及析构函数说明</h2>
<a id="ae54ccfde6f9e18cd31e9323e6520ec6c" name="ae54ccfde6f9e18cd31e9323e6520ec6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae54ccfde6f9e18cd31e9323e6520ec6c">&#9670;&#160;</a></span>DBConn() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ol::mysql::DBConn::DBConn </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classol_1_1mysql_1_1_d_b_conn.html">DBConn</a> &amp;</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span><span class="mlabel delete">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a436bfa9d118e16b48bc4fbb75aba9509" name="a436bfa9d118e16b48bc4fbb75aba9509"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a436bfa9d118e16b48bc4fbb75aba9509">&#9670;&#160;</a></span>DBConn() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ol::mysql::DBConn::DBConn </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a21b561060eb830ca7d3c0d8a1f105c05" name="a21b561060eb830ca7d3c0d8a1f105c05"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21b561060eb830ca7d3c0d8a1f105c05">&#9670;&#160;</a></span>~DBConn()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ol::mysql::DBConn::~DBConn </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">成员函数说明</h2>
<a id="a306b5ef859d4a99299361bb6b1aed498" name="a306b5ef859d4a99299361bb6b1aed498"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a306b5ef859d4a99299361bb6b1aed498">&#9670;&#160;</a></span>character()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ol::mysql::DBConn::character </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>charset</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="abb064f7995d5dfc399af36b80b0bab92" name="abb064f7995d5dfc399af36b80b0bab92"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb064f7995d5dfc399af36b80b0bab92">&#9670;&#160;</a></span>commit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ol::mysql::DBConn::commit </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>提交事务 </p>
<dl class="section return"><dt>返回</dt><dd>0-成功，其他-失败（程序中一般不必关心返回值） </dd></dl>

</div>
</div>
<a id="a149cbf01195e9af7745c2fabb26251bd" name="a149cbf01195e9af7745c2fabb26251bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a149cbf01195e9af7745c2fabb26251bd">&#9670;&#160;</a></span>connecttodb()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ol::mysql::DBConn::connecttodb </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;</td>          <td class="paramname"><span class="paramname"><em>connstr</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;</td>          <td class="paramname"><span class="paramname"><em>charset</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>autocommitopt</em></span><span class="paramdefsep"> = </span><span class="paramdefval">false</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>登录数据库 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">connstr</td><td>连接字符串，格式："username:password@host:port/dbname" </td></tr>
    <tr><td class="paramname">charset</td><td>客户端字符集（需与数据库一致，避免乱码） </td></tr>
    <tr><td class="paramname">autocommitopt</td><td>自动提交开关（默认false-关闭） </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>0-成功，其他-失败（失败的代码在m_cda.rc中，失败的描述在m_cda.message中） </dd></dl>

</div>
</div>
<a id="a1e8862e18153291f932587533e5e5826" name="a1e8862e18153291f932587533e5e5826"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e8862e18153291f932587533e5e5826">&#9670;&#160;</a></span>disconnect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ol::mysql::DBConn::disconnect </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>断开数据库连接（未提交事务自动回滚） </p>
<dl class="section return"><dt>返回</dt><dd>0-成功，其他-失败（程序中一般不必关心返回值） </dd></dl>

</div>
</div>
<a id="a67d691b37160336948e69daaaf99e25f" name="a67d691b37160336948e69daaaf99e25f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67d691b37160336948e69daaaf99e25f">&#9670;&#160;</a></span>err_report()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ol::mysql::DBConn::err_report </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ae475137773b3e0bd04676eded3e2c1ab" name="ae475137773b3e0bd04676eded3e2c1ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae475137773b3e0bd04676eded3e2c1ab">&#9670;&#160;</a></span>execute()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ol::mysql::DBConn::execute </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>fmt</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>...</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>执行静态SQL语句（无绑定变量的非查询语句） </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">fmt</td><td>格式化SQL字符串（支持可变参数，同printf） </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>0-成功，其他-失败（失败的代码在m_cda.rc中，失败的描述在m_cda.message中） </dd></dl>
<dl class="section note"><dt>注解</dt><dd>如果成功的执行了非查询语句，在m_cda.rpc中保存了本次执行SQL影响记录的行数。 程序中必须检查execute方法的返回值。 在DBConn类中提供了execute方法，是为了方便程序员，在该方法中，也是用DBStmt类来完成功能。 </dd></dl>

</div>
</div>
<a id="a1b5d8f6e7400a163a628c0e8d55404d8" name="a1b5d8f6e7400a163a628c0e8d55404d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b5d8f6e7400a163a628c0e8d55404d8">&#9670;&#160;</a></span>isopen()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ol::mysql::DBConn::isopen </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>判断数据库是否已连接 </p>
<dl class="section return"><dt>返回</dt><dd>已连接返回true，否则false </dd></dl>

</div>
</div>
<a id="adbe08566fa4b81183df807582b9fe67d" name="adbe08566fa4b81183df807582b9fe67d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adbe08566fa4b81183df807582b9fe67d">&#9670;&#160;</a></span>message()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string ol::mysql::DBConn::message </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>获取错误描述信息 </p>
<dl class="section return"><dt>返回</dt><dd>错误描述字符串（失败时有效，成功时为空） </dd></dl>

</div>
</div>
<a id="a4f76c06de210477552b89a705114f203" name="a4f76c06de210477552b89a705114f203"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f76c06de210477552b89a705114f203">&#9670;&#160;</a></span>operator=()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classol_1_1mysql_1_1_d_b_conn.html">DBConn</a> &amp; ol::mysql::DBConn::operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classol_1_1mysql_1_1_d_b_conn.html">DBConn</a> &amp;</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span><span class="mlabel delete">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a29bceb544e649de7ba01e2076761c09f" name="a29bceb544e649de7ba01e2076761c09f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a29bceb544e649de7ba01e2076761c09f">&#9670;&#160;</a></span>rc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ol::mysql::DBConn::rc </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>获取错误代码 </p>
<dl class="section return"><dt>返回</dt><dd>0-成功，其它值-失败 </dd></dl>

</div>
</div>
<a id="a71e770f9663f4519aec47929a635fb31" name="a71e770f9663f4519aec47929a635fb31"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a71e770f9663f4519aec47929a635fb31">&#9670;&#160;</a></span>reconnect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ol::mysql::DBConn::reconnect </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>重新连接数据库 </p>
<p>当数据库连接断开时，关闭旧连接并尝试使用已保存的连接参数重新建立连接。 重连成功后会自动恢复字符集和自动提交模式等连接属性。</p>
<dl class="section return"><dt>返回</dt><dd>int 0表示重连成功，-1表示重连失败 </dd></dl>
<dl class="section note"><dt>注解</dt><dd>调用前应确保已通过connecttodb()成功连接过数据库（保存了连接参数） </dd></dl>
<dl class="section see"><dt>参见</dt><dd><a class="el" href="#a149cbf01195e9af7745c2fabb26251bd" title="登录数据库">connecttodb()</a></dd></dl>
<p>该方法执行以下操作：</p><ol type="1">
<li>关闭当前可能存在的旧连接</li>
<li>重新初始化MySQL连接对象</li>
<li>使用上次成功连接的参数（主机、用户名、密码等）重新连接</li>
<li>恢复连接的字符集和自动提交设置</li>
<li>更新连接状态</li>
</ol>
<dl class="section return"><dt>返回</dt><dd>int 0表示重连成功，-1表示重连失败 </dd></dl>
<dl class="section note"><dt>注解</dt><dd>失败信息可通过message()方法获取 </dd></dl>
<dl class="section warning"><dt>警告</dt><dd>重连成功后，之前的预处理语句（DBStmt）可能需要重新准备 </dd></dl>

</div>
</div>
<a id="add40429c3b966d04e70679fa9143bb18" name="add40429c3b966d04e70679fa9143bb18"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add40429c3b966d04e70679fa9143bb18">&#9670;&#160;</a></span>rollback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ol::mysql::DBConn::rollback </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>回滚事务 </p>
<dl class="section return"><dt>返回</dt><dd>0-成功，其他-失败（程序中一般不必关心返回值） </dd></dl>

</div>
</div>
<a id="a1841d1553d13a2f44013c192e68f149b" name="a1841d1553d13a2f44013c192e68f149b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1841d1553d13a2f44013c192e68f149b">&#9670;&#160;</a></span>rpc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long ol::mysql::DBConn::rpc </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>获取影响数据的行数 </p>
<dl class="section return"><dt>返回</dt><dd>对于insert/update/delete返回影响记录数，对于select返回结果集行数 </dd></dl>

</div>
</div>
<a id="a8f3147e0b894a800d635649041ea80cb" name="a8f3147e0b894a800d635649041ea80cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f3147e0b894a800d635649041ea80cb">&#9670;&#160;</a></span>setdbopt()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ol::mysql::DBConn::setdbopt </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>connstr</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a name="doc-related-members" id="doc-related-members"></a><h2 id="header-doc-related-members" class="groupheader">友元及相关符号说明</h2>
<a id="aa64c719be4d2aea92d419606f414e98a" name="aa64c719be4d2aea92d419606f414e98a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa64c719be4d2aea92d419606f414e98a">&#9670;&#160;</a></span>DBStmt</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classol_1_1mysql_1_1_d_b_stmt.html">DBStmt</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel friend">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a name="doc-variable-members" id="doc-variable-members"></a><h2 id="header-doc-variable-members" class="groupheader">类成员变量说明</h2>
<a id="a22858c5f72e930e6f3efbe73b25fd054" name="a22858c5f72e930e6f3efbe73b25fd054"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22858c5f72e930e6f3efbe73b25fd054">&#9670;&#160;</a></span>m_autocommitopt</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int ol::mysql::DBConn::m_autocommitopt</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="adb9de7af304d94a7d7bcbf39ca0c8af0" name="adb9de7af304d94a7d7bcbf39ca0c8af0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb9de7af304d94a7d7bcbf39ca0c8af0">&#9670;&#160;</a></span>m_cda</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structol_1_1mysql_1_1_c_d_a___d_e_f.html">CDA_DEF</a> ol::mysql::DBConn::m_cda</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a6cd3170df9604e26b68d546a56413bb6" name="a6cd3170df9604e26b68d546a56413bb6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6cd3170df9604e26b68d546a56413bb6">&#9670;&#160;</a></span>m_charset</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string ol::mysql::DBConn::m_charset</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a0c81998dff8b3ed958621980ebbfd84d" name="a0c81998dff8b3ed958621980ebbfd84d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c81998dff8b3ed958621980ebbfd84d">&#9670;&#160;</a></span>m_dbname</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string ol::mysql::DBConn::m_dbname</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a4ddee18472da0953e18221e17f975acd" name="a4ddee18472da0953e18221e17f975acd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ddee18472da0953e18221e17f975acd">&#9670;&#160;</a></span>m_host</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string ol::mysql::DBConn::m_host</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ac790a70ad9ef4a7d4c60018849c7bd6a" name="ac790a70ad9ef4a7d4c60018849c7bd6a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac790a70ad9ef4a7d4c60018849c7bd6a">&#9670;&#160;</a></span>m_mysql</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">MYSQL* ol::mysql::DBConn::m_mysql</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a6b7cbf8609362912d12ae500aa444f11" name="a6b7cbf8609362912d12ae500aa444f11"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b7cbf8609362912d12ae500aa444f11">&#9670;&#160;</a></span>m_pass</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string ol::mysql::DBConn::m_pass</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a89c77637570af337c0d41a7064ae822d" name="a89c77637570af337c0d41a7064ae822d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89c77637570af337c0d41a7064ae822d">&#9670;&#160;</a></span>m_port</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int ol::mysql::DBConn::m_port</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a892cd3f823cd2d846bed2ca626996328" name="a892cd3f823cd2d846bed2ca626996328"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a892cd3f823cd2d846bed2ca626996328">&#9670;&#160;</a></span>m_state</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int ol::mysql::DBConn::m_state</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aba9291fa2b473601eddb07ab7604a64a" name="aba9291fa2b473601eddb07ab7604a64a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba9291fa2b473601eddb07ab7604a64a">&#9670;&#160;</a></span>m_unix_socket</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string ol::mysql::DBConn::m_unix_socket</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ab4251d0d50e1af65f7e495ce6bcf803e" name="ab4251d0d50e1af65f7e495ce6bcf803e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4251d0d50e1af65f7e495ce6bcf803e">&#9670;&#160;</a></span>m_user</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string ol::mysql::DBConn::m_user</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<hr/>该类的文档由以下文件生成:<ul>
<li>oldblib/mysql/include/<a class="el" href="ol__mysql_8h_source.html">ol_mysql.h</a></li>
<li>oldblib/mysql/src/<a class="el" href="ol__mysql_8cpp.html">ol_mysql.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="namespaceol.html">ol</a></li><li class="navelem"><a href="namespaceol_1_1mysql.html">mysql</a></li><li class="navelem"><a href="classol_1_1mysql_1_1_d_b_conn.html">DBConn</a></li>
    <li class="footer">制作者 <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
